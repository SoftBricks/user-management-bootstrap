<template name="umEditUser">
    {{#with user}}
        <!-- Temporary go back -->
        <button id="goBackTo_showUser" class="btn btn-default">Go back to User Information</button>
        {{#autoForm collection=users doc=this id="editUserForm" type="update" validation="keyup" class="col s12 l12"}}

            <div class="um list-group">
                <div class="input-field col s12 m12 l12 list-group-item">
                    <label class="active" for="fullname">Fullname</label>
                    {{> afFieldInput name="profile.fullname" autocomplete="off" value=this.profile.fullname class="validate"}}
                </div>
                <div class="input-field col s12 m12 l12 list-group-item">
                    <label class="active" for="username">Username</label>
                    {{> afFieldInput name="username" autocomplete="off" value=this.username class="validate"}}
                </div>
                {{#if isInRole 'admin,superAdmin'}}
                <div class="input-field col s12 m12 l12 list-group-item">
                    <label class="active" for="email">Email</label>
                    {{> afFieldInput name="emails.0.address" autocomplete="off" value=email class="validate"}}
                </div>
                <div class="input-field col s12 m12 l12 list-group-item">
                    <label class="active" for="email">Email verifiziert</label>
                    {{> afFieldInput name="emails.0.verified" type="boolean-checkbox" class="validate"}}
                </div>
                {{/if}}
                {{#if isInRole 'admin,superAdmin'}}
                    <!-- {{#each currentRoles}}
                        <div class="input-field col s12 m12 l12 list-group-item">
                        {{#if isField 'superAdmin'}}
                            <input type="checkbox" disabled readonly id="{{this.name}}" name="roles" checked="{{userHasRight}}">
                            <label for="admin">{{this.name}}</label>
                        {{else}}
                            <input type="checkbox" id="{{this.name}}" name="roles" checked="{{userHasRight}}">
                            <label for="admin">{{this.name}}</label>
                        {{/if}}
                        </div>
                    {{/each}} -->
                    <div class="input-field col s12 m12 l12 list-group-item">
                        <label class="active" for="admin">Rollen</label>
                        {{#each roles}}
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" id="{{name}}" name="roles" checked="{{userHasRight}}"/>
                                    Nutzer ist {{name}}
                                </label>
                            </div>
                        {{/each}}
                    </div>
                {{/if}}
            </div>
            <!--{{> afQuickField name="profile.activated"}}-->
            <!--{{> afQuickField name="profile.fields"}}-->

                <!--{{#each globalFields}}-->
            <!--{{> afQuickField name=this.name}}-->
                <!--{{/each}}-->

            <div class="um list-group">
                <div class="list-group-item">
                    <button type="submit" class="btn btn-primary">{{save}}</button>
                    <!-- CSI Test -->
                    <!--{{#if isInRole 'admin,superAdmin'}}-->
                        <!--<button type="click" class="btn btn-primary">{{remove}}</button>-->
                    <!--{{/if}}-->
                </div>
            </div>
        {{/autoForm}}
    {{/with}}
</template>
